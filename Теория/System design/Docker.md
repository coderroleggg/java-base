# üê≥ Docker: —á—Ç–æ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫?

Docker —Å—Ç–∞–ª —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –≤ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏, –∏ –∑–Ω–∞—Ç—å –µ–≥–æ –Ω—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –†–∞–∑–±–µ—Ä–µ–º –ø–æ–¥—Ä–æ–±–Ω–æ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ —É–º–µ—Ç—å:

## –ß—Ç–æ —Ç–∞–∫–æ–µ –¥–æ–∫–µ—Ä?

**Docker** —É–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.

**–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä** - –∑–∞–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –Ω–∞ –≤—Å–µ—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö —Å Docker –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π. –û–¥–Ω–∞–∫–æ –æ–Ω –ª–µ–≥—á–µ –∏ –±—ã—Å—Ç—Ä–µ–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –Ω–µ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ (–∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞). –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–∑ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –∏–ª–∏ —Å–∫–∞—á–∞–Ω–Ω–æ–≥–æ Docker –æ–±—Ä–∞–∑–∞.

**–û–±—Ä–∞–∑** - —ç—Ç–æ —Ñ–∞–π–ª, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Ñ–∞–π–ª—ã, –Ω—É–∂–Ω—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –∏–º–µ—Ç—å –æ–±—Ä–∞–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL –∏–ª–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Å–æ–±—Ä–∞–Ω–Ω—ã–π –æ–±—Ä–∞–∑ –≤–∞—à–µ–≥–æ –±—ç–∫–µ–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Spring. –ò–∑ —ç—Ç–∏—Ö –æ–±—Ä–∞–∑–æ–≤ –º–æ–∂–Ω–æ –ø–æ–¥–Ω–∏–º–∞—Ç—å —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –æ–±—Ä–∞–∑–æ–º.

**Docker daemon** - —ç—Ç–æ —Å–µ—Ä–¥—Ü–µ —Å–∏—Å—Ç–µ–º—ã. –û–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.

**Registry** - —ç—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–æ–∫–µ—Ä-–æ–±—Ä–∞–∑–æ–≤. Docker Hub - —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π, –Ω–æ –º–Ω–æ–≥–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–≤–æ–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ registry. –í –Ω–∏—Ö —Ö—Ä–∞–Ω—è—Ç—Å—è –æ–±—Ä–∞–∑—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø—É—à–∏—Ç—å, —Å–∫–∞—á–∏–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å –ø–æ–º–æ—â—å—é Docker –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

## Docker –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

- docker build - —Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑
- docker run - –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- docker stop - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- docker logs - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
- docker ps - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

### –ß—Ç–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–∞—Å—Ç–æ:

- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–æ–≤ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É (port mapping) (-p 8080:80) - —ç—Ç–æ –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏—é –∑–≤–æ–Ω–∫–æ–≤: —Å–Ω–∞—Ä—É–∂–∏ –∑–≤–æ–Ω—è—Ç –Ω–∞ –æ–¥–∏–Ω –Ω–æ–º–µ—Ä, –∞ –ø–æ–ø–∞–¥–∞—é—Ç –Ω–∞ –¥—Ä—É–≥–æ–π.
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö volumes - —ç—Ç–æ –∫–∞–∫ –≤–Ω–µ—à–Ω–∏–π –∂–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫ –¥–ª—è —Ç–≤–æ–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –¥–∞–∂–µ –ø–æ—Å–ª–µ –µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è.

## –ö–∞–∫ —Å–æ–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã?

–ß—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –Ω—É–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å –ø–æ—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –æ–±—Ä–∞–∑–∞ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ - Dockerfile. –ó–∞—Ç–µ–º –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã docker build –æ–±—Ä–∞–∑ –±—É–¥–µ—Ç —Å–æ–±—Ä–∞–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –æ–±—Ä–∞–∑–æ–≤.

–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –≤ —Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–æ–≤:

- –ü–æ–º–Ω–∏ –ø—Ä–æ —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –±–∞–∑–æ–≤—ã—Ö –æ–±—Ä–∞–∑–æ–≤ - alpine/slim/full. –í—Å–µ–≥–¥–∞ –≤–∞–∂–µ–Ω –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Ä–∞–∑–º–µ—Ä–æ–º –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞–∑–∞. –ß–∞—Å—Ç–æ full –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º, –∞ alpine –Ω–µ —Å–æ–≤—Å–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º.
- –ò—Å–ø–æ–ª—å–∑—É–π multi-stage build. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç—Ç–∞–ø–æ–≤, —É–º–µ–Ω—å—à–∞—è —Ä–∞–∑–º–µ—Ä –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –≤ –æ–¥–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –∞ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ –¥—Ä—É–≥–æ–º, –±–æ–ª–µ–µ –ª–µ–≥–∫–æ–º.
- –í —Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —á–∞—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –ø–æ—Ä—è–¥–∫—É —Å–≤–µ—Ä—Ö –≤–Ω–∏–∑, –µ—Å–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å. –¢–∞–∫–æ–π –∫—ç—à —Å–ª–æ–µ–≤ –≤ Dockerfile –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å —É–º–æ–º. –†–µ–¥–∫–æ –º–µ–Ω—è—é—â–∏–µ—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Ä–∞–∑–º–µ—â–∞–π –≤–≤–µ—Ä—Ö—É. –ß–∞—Å—Ç–æ –º–µ–Ω—è—é—â–∏–µ—Å—è - –≤–Ω–∏–∑—É.
- –ò—Å–ø–æ–ª—å–∑—É–π .dockerignore –∏ —É–¥–∞–ª—è–π –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã, —á—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞.

## –ó–∞—á–µ–º –Ω—É–∂–µ–Ω Docker Compose?

Docker Compose - —ç—Ç–æ –ø—É–ª—å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏:

- –í–º–µ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞ 5-6 –∫–æ–º–∞–Ω–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, —Ç—ã –ø–∏—à–µ—à—å –æ–¥–∏–Ω —Ñ–∞–π–ª –∏ –∑–∞–ø—É—Å–∫–∞–µ—à—å –≤—Å—ë –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π.
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ .env —Ñ–∞–π–ª–µ - –Ω–∏–∫–∞–∫–∏—Ö –±–æ–ª—å—à–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π.
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ–º–æ–π —Å–≤—è–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –æ–±—ã—á–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ docker-compose.yml

## –° —á–µ–≥–æ –ª—É—á—à–µ –Ω–∞—á–∞—Ç—å?

1. –û–±–µ—Ä–Ω–∏ –≤—Å–µ —Å–≤–æ–∏ –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç—ã –∏ –ª—é–±—ã–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã-—Å–∫—Ä–∏–ø—Ç—ã –≤ –¥–æ–∫–µ—Ä-–æ–±—Ä–∞–∑—ã, —á—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å –∏—Ö —Ç–æ–ª—å–∫–æ –≤ –≤–∏–¥–µ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. 
2. –ó–∞–º–µ–Ω–∏ –≤—Å–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, –æ—Ç–¥–µ–ª–∏–≤ —Å–∞–º–∏ –¥–∞–Ω–Ω—ã–µ –≤ volume. 
3. –ü—Ä–æ–µ–∫—Ç—ã, –≥–¥–µ –µ—Å—Ç—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º 1 —Å–µ—Ä–≤–∏—Å –∏ –±–∞–∑–∞ –ø–µ—Ä–µ–≤–µ–¥–∏ –Ω–∞ docker compose, —á—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å –≤–µ—Å—å —Å—Ç–µ–∫ –∑–∞ 1 –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

[–ü—Ä–∏–º–µ—Ä—ã Dockerfile + –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∞–º—ã—Ö –ø–æ–ª–µ–∑–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –≤ Docker](./Docker%20–ø—Ä–∏–º–µ—Ä—ã.md)